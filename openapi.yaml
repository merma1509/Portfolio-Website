openapi: 3.0.3
info:
  title: Portfolio Backend API
  description: API for ~M~'s portfolio website - handles contact forms, newsletter subscriptions, project inquiries, feedback, and blog management
  version: 1.0.0
  contact:
    name: ~M~
    email: aimemartin018@gmail.com
    url: https://github.com/merma1509/Portfolio-Website
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
- url: http://localhost:8000
  description: Development server
- url: https://your-production-api.com
  description: Production server

paths:
  /:
    get:
      tags:
      - Root
      summary: API Root
      description: Returns basic API information
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Portfolio Backend API"

  /health:
    get:
      tags:
      - Health
      summary: Health Check
      description: Check if the API is running and healthy
      responses:
        '200':
          description: API is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "healthy"

  /api/contact:
    post:
      tags:
      - Contact
      summary: Submit Contact Form
      description: Handle contact form submissions from the portfolio website
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ContactMessage'
      responses:
        '200':
          description: Contact message submitted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "success"
                  message:
                    type: string
                    example: "Your message has been sent successfully!"
                  message_id:
                    type: integer
                    example: 1
        '422':
          description: Validation error
          content:
            application/json:
              schema:
                type: object
                properties:
                  detail:
                    type: array
                    items:
                      type: object
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  detail:
                    type: string
                    example: "An error occurred while processing your request. Please try again later."

  /api/newsletter:
    post:
      tags:
      - Newsletter
      summary: Subscribe to Newsletter
      description: Add a new subscriber to the newsletter list
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NewsletterSubscriber'
      responses:
        '200':
          description: Successfully subscribed to newsletter
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "success"
                  message:
                    type: string
                    example: "Successfully subscribed to newsletter!"
        '409':
          description: Email already subscribed
          content:
            application/json:
              schema:
                type: object
                properties:
                  detail:
                    type: string
                    example: "Email already subscribed"
        '422':
          description: Validation error
        '500':
          description: Internal server error

  /api/inquiry:
    post:
      tags:
      - Inquiry
      summary: Submit Project Inquiry
      description: Handle project-specific inquiries
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProjectInquiry'
      responses:
        '200':
          description: Inquiry submitted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "success"
                  message:
                    type: string
                    example: "Your project inquiry has been submitted successfully!"
                  inquiry_id:
                    type: integer
                    example: 1
        '422':
          description: Validation error
        '500':
          description: Internal server error

  /api/feedback:
    post:
      tags:
      - Feedback
      summary: Submit Feedback
      description: Collect user feedback with ratings
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Feedback'
      responses:
        '200':
          description: Feedback submitted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "success"
                  message:
                    type: string
                    example: "Thank you for your feedback!"
                  feedback_id:
                    type: integer
                    example: 1
        '422':
          description: Validation error
        '500':
          description: Internal server error

  /api/user:
    post:
      tags:
      - User
      summary: Create User
      description: Register a new user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
      responses:
        '200':
          description: User created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "success"
                  message:
                    type: string
                    example: "User created successfully!"
                  user_id:
                    type: integer
                    example: 1
        '409':
          description: Username or email already exists
        '422':
          description: Validation error
        '500':
          description: Internal server error

  /api/blog:
    get:
      tags:
      - Blog
      summary: Get All Blog Posts
      description: Retrieve all blog posts
      responses:
        '200':
          description: List of blog posts
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Blog'
        '500':
          description: Internal server error

    post:
      tags:
      - Blog
      summary: Create Blog Post
      description: Create a new blog post
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Blog'
      responses:
        '200':
          description: Blog post created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "success"
                  message:
                    type: string
                    example: "Blog post created successfully!"
                  blog_id:
                    type: integer
                    example: 1
        '422':
          description: Validation error
        '500':
          description: Internal server error

  /api/blog/{blog_id}:
    get:
      tags:
      - Blog
      summary: Get Blog Post by ID
      description: Retrieve a specific blog post
      parameters:
      - name: blog_id
        in: path
        required: true
        schema:
          type: integer
        description: ID of the blog post
      responses:
        '200':
          description: Blog post details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Blog'
        '404':
          description: Blog post not found
        '500':
          description: Internal server error

components:
  schemas:
    ContactMessage:
      type: object
      required:
      - name
      - email
      - phone
      - message
      properties:
        name:
          type: string
          minLength: 2
          maxLength: 100
          description: Full name of the sender
          example: "John Doe"
        email:
          type: string
          format: email
          description: Email address of the sender
          example: "john@example.com"
        phone:
          type: string
          minLength: 10
          maxLength: 20
          description: Phone number of the sender
          example: "+250 70 000 000"
        message:
          type: string
          minLength: 10
          maxLength: 1000
          description: Message content
          example: "I would like to discuss a potential collaboration opportunity."
        occupation:
          type: string
          maxLength: 100
          description: Occupation or role of the sender
          example: "Software Developer"

    NewsletterSubscriber:
      type: object
      required:
      - name
      - email
      properties:
        name:
          type: string
          minLength: 2
          maxLength: 100
          description: Name of the subscriber
          example: "Jane Smith"
        email:
          type: string
          format: email
          description: Email address for newsletter
          example: "jane@example.com"

    ProjectInquiry:
      type: object
      required:
      - project_name
      - name
      - email
      - inquiry
      properties:
        project_name:
          type: string
          minLength: 2
          maxLength: 100
          description: Name of the project being inquired about
          example: "OpenClimate Project"
        name:
          type: string
          minLength: 2
          maxLength: 100
          description: Name of the inquirer
          example: "Alice Johnson"
        email:
          type: string
          format: email
          description: Email address of the inquirer
          example: "alice@example.com"
        inquiry:
          type: string
          minLength: 10
          maxLength: 2000
          description: Detailed inquiry message
          example: "I'm interested in learning more about the OpenClimate project and how I can contribute."
        phone:
          type: string
          minLength: 5
          maxLength: 20
          description: Optional phone number
          example: "+250 780 000 000"
        occupation:
          type: string
          maxLength: 100
          description: Optional occupation information
          example: "Climate Researcher"

    Feedback:
      type: object
      required:
      - type
      - content
      - rating
      properties:
        type:
          type: string
          description: Type of feedback
          example: "general"
        content:
          type: string
          description: Feedback content
          example: "Great portfolio! Very impressive projects."
        rating:
          type: integer
          minimum: 1
          maximum: 5
          description: Rating from 1 to 5
          example: 5

    User:
      type: object
      required:
      - username
      - email
      - password
      properties:
        username:
          type: string
          description: Unique username
          example: "mugabo"
        email:
          type: string
          format: email
          description: User email address
          example: "mugabo@example.com"
        password:
          type: string
          description: User password (will be hashed)
          example: "securepassword123"

    Blog:
      type: object
      required:
      - title
      - content
      - author_id
      properties:
        id:
          type: integer
          readOnly: true
          description: Blog post ID
          example: 1
        title:
          type: string
          description: Blog post title
          example: "My Journey in AI and IoT"
        content:
          type: string
          description: Blog post content
          example: "In this post, I'll share my experiences working with AI and IoT technologies..."
        author_id:
          type: integer
          description: ID of the author user
          example: 1
        created_at:
          type: string
          format: date-time
          readOnly: true
          description: Creation timestamp
          example: "2024-01-15T10:30:00Z"
        updated_at:
          type: string
          format: date-time
          readOnly: true
          description: Last update timestamp
          example: "2024-01-15T10:30:00Z"

  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

security:
- BearerAuth: []

tags:
- name: Root
  description: API root endpoints
- name: Health
  description: Health check endpoints
- name: Contact
  description: Contact form management
- name: Newsletter
  description: Newsletter subscription management
- name: Inquiry
  description: Project inquiry management
- name: Feedback
  description: User feedback collection
- name: User
  description: User management
- name: Blog
  description: Blog content management
